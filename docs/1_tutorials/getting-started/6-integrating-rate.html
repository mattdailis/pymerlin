<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Integral Method Comparison" href="7-integration-comparision.html" /><link rel="prev" title="Second Look" href="5-second-look.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.05.06 -->
        <title>Integrating Data Rate - pymerlin 0.0.9 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">pymerlin 0.0.9 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">pymerlin 0.0.9 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Intro Tutorial: Solid State Recorder</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Intro Tutorial: Solid State Recorder</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="1-gettingstarted.html">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="2-model-test-drive.html">Model Test Drive</a></li>
<li class="toctree-l3"><a class="reference internal" href="3-enum-derived-resource.html">Enumerated and Derived Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="4-current-value.html">Using Current Value in an Effect Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="5-second-look.html">Second Look</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Integrating Data Rate</a></li>
<li class="toctree-l3"><a class="reference internal" href="7-integration-comparision.html">Integral Method Comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-simulation-config.html">Sim Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial2.html">Going further</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../2_guides/index.html">User Guides</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of User Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2_guides/organization.html">How to organize your project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_guides/jupyter.html">How to use pymerlin in Jupyter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_guides/datamodel.html">Modeling Data Volume</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_guides/powermodel.html">Modeling Power</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_guides/telecom.html">Modeling Telecom</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_guides/scheduling.html">Scheduling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_guides/spice.html">Using spice for geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_guides/build-jar.html">Build an Aerie-compatible JAR file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_guides/monte-carlo.html">Monte-Carlo analyses</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../3_explanation/index.html">Background</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Background</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../3_explanation/simulation.html">Discrete Event Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../3_explanation/planning.html">Planning and Scheduling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../3_explanation/fidelity.html">Tuning Fidelity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../3_explanation/command-errors.html">Command Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../3_explanation/co-simulation.html">Co-Simulation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../apidocs/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.html">pymerlin</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of pymerlin</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.checkout.html">pymerlin.checkout</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.clock.html">pymerlin.clock</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of pymerlin.clock</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.clock.clock.html">pymerlin.clock.clock</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.clock.ClockMaker.html">pymerlin.clock.ClockMaker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.clock.DerivedClock.html">pymerlin.clock.DerivedClock</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.duration.html">pymerlin.duration</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of pymerlin.duration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.duration.Duration.html">pymerlin.duration.Duration</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.model_actions.html">pymerlin.model_actions</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of pymerlin.model_actions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.model_actions.call.html">pymerlin.model_actions.call</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.model_actions.delay.html">pymerlin.model_actions.delay</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.model_actions.spawn.html">pymerlin.model_actions.spawn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.model_actions.wait_until.html">pymerlin.model_actions.wait_until</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.reactions.html">pymerlin.reactions</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of pymerlin.reactions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../apidocs/_autosummary/pymerlin.reactions.monitor_updates.html">pymerlin.reactions.monitor_updates</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../common-errors.html">Common Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer.html">Developing pymerlin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../publishing.html">Publishing to pypi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/1_tutorials/getting-started/6-integrating-rate.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="integrating-data-rate">
<h1>Integrating Data Rate<a class="headerlink" href="#integrating-data-rate" title="Link to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This page is under construction. Please bear with us as we port
our <a class="reference external" href="https:#nasa-ammos.github.io/aerie-docs/tutorials/mission-modeling/introduction/">Java tutorial</a> to python.</p>
</div>
<p>Now is where the fun really begins! Although having the data rate in and out of our SSR is useful, we are often more
concerned with the total amount of volume we have in our SSR in order to make sure we don’t over fill it and have
sufficient downlink opportunities to get all the data we collected back to Earth. In order to compute total volume, we
must figure out a way to integrate our <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code>. It turns out there are many different methods in Aerie you can
choose to arrive at the total SSR volume, but each method has its own advantages and drawbacks. We will explore 4
different options for integration with the final option, a derived <code class="docutils literal notranslate"><span class="pre">Polynomial</span></code> resource, being our recommended
approach. As we progress through the options, you’ll learn about a few more features of the resource framework that you
can use for different use cases in your model including the use of <code class="docutils literal notranslate"><span class="pre">Reactions</span></code> and <strong>daemon</strong> tasks.</p>
<section id="method-1-increase-volume-within-activity">
<h2>Method 1 - Increase volume within activity<a class="headerlink" href="#method-1-increase-volume-within-activity" title="Link to this heading">¶</a></h2>
<p>The simplest method for performing an “integration” of <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> is to compute the integral directly within the
effect model of the activities who change the <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code>. Before we do this, let’s make sure we have a data volume
resource in our <code class="docutils literal notranslate"><span class="pre">DataModel</span></code> class. For each method, we are going to build a different data volume resource so we can
eventually compare them in the Aerie UI. As this is our simplest method, let’s call this resource <code class="docutils literal notranslate"><span class="pre">ssr_volume_simple</span></code>
and make it store volume in Gigabits (Gb). Since we are going to directly effect this resource in our activities, this
will need to be a <code class="docutils literal notranslate"><span class="pre">cell</span></code>. The declaration looks just like <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code></p>
<p>as does the definition, initialization, and registration in the constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">ssr_volume_simple</span> <span class="o">=</span> <span class="n">registrar</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">registrar</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s2">&quot;ssr_volume_simple&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssr_volume_simple</span><span class="o">.</span><span class="n">get</span><span class="p">)</span>
</pre></div>
</div>
<p>Taking a look at our <code class="docutils literal notranslate"><span class="pre">collect_data</span></code> activity, we can add the following line of code after the <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">delay()</span></code> within its
body to compute the data volume resulting from the activity collecting data at a constant duration over the full
duration of the activity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">data_model</span><span class="o">.</span><span class="n">ssr_volume_simple</span> <span class="o">+=</span> <span class="n">rate</span> <span class="o">*</span> <span class="n">duration</span><span class="o">.</span><span class="n">to_number_in</span><span class="p">(</span><span class="n">Duration</span><span class="o">.</span><span class="n">SECONDS</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1000.0</span>
</pre></div>
</div>
<p>This line will increase <code class="docutils literal notranslate"><span class="pre">SRR_Volume_Simple</span></code> at the end of the activity by <code class="docutils literal notranslate"><span class="pre">rate</span></code> times <code class="docutils literal notranslate"><span class="pre">duration</span></code> divided by our magic
number to convert <code class="docutils literal notranslate"><span class="pre">Mb</span></code> to <code class="docutils literal notranslate"><span class="pre">Gb</span></code>. Note that the <code class="docutils literal notranslate"><span class="pre">duration</span></code> object has some helper functions like <code class="docutils literal notranslate"><span class="pre">to_number_in</span></code> to help you
convert the <code class="docutils literal notranslate"><span class="pre">duration</span></code> type to a <code class="docutils literal notranslate"><span class="pre">double</span></code> value.</p>
<p>There are a few notable issues with this approach. The first issue is that when a plan is simulated, the data volume of
the SSR will only increase at the very end of the activity even though in reality, the volume is growing linearly in
time throughout the duration of the activity. If your planners only need this level of fidelity to do their work, this
may be ok. However, if your planners need a little more fidelity during the time span of the activity, you could spread
out the data volume accumulation over many steps. That would look something like this in code,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">num_steps</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">step_size</span> <span class="o">=</span> <span class="n">duration</span> <span class="o">/</span> <span class="n">num_steps</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_steps</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">delay</span><span class="p">(</span><span class="n">step_size</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">data_model</span><span class="o">.</span><span class="n">ssr_volume_simple</span> <span class="o">+=</span> <span class="n">this</span><span class="o">.</span><span class="n">rate</span> <span class="o">*</span> <span class="n">step_size</span><span class="o">.</span><span class="n">to_number_in</span><span class="p">(</span><span class="n">SECONDS</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1000.0</span>

</pre></div>
</div>
<p>which would replace the <code class="docutils literal notranslate"><span class="pre">delay()</span></code> and the single data volume increase line from above. The resulting timeline
for <code class="docutils literal notranslate"><span class="pre">ssr_volume_simple</span></code> would look like a stair step with the number of steps equal to <code class="docutils literal notranslate"><span class="pre">num_steps</span></code>. It’s important to
remember we are still using a <code class="docutils literal notranslate"><span class="pre">Discrete</span></code> resource, so the resource is stored as a constant, “step-function” profile in
Aerie. We will show the use of a <code class="docutils literal notranslate"><span class="pre">Polynomial</span></code> resource in our final method to truly store and view data volume as a
linear profile.</p>
<p>Another issue with this approach is that iy does not transfer well to activities like <code class="docutils literal notranslate"><span class="pre">change_mag_mode</span></code> that alter
the <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> and do not return the rate back to its original value at the end of the activity (i.e. activities
whose effects on rate are not contained within the time span of the activity). In order to compute the magnetometer’s
contribution to the data volume in <code class="docutils literal notranslate"><span class="pre">change_mag_mode</span></code>, we would need to multiply the <code class="docutils literal notranslate"><span class="pre">current_rate</span></code> by the duration since
the last mode change, or if no mode change has occurred, the beginning of the plan. While this is possible by using
a <code class="docutils literal notranslate"><span class="pre">Clock</span></code> resource to track time between mode changes, the <code class="docutils literal notranslate"><span class="pre">change_mag_mode</span></code> activity would now requires additional
context about the plan that would otherwise be unnecessary.</p>
<p>A third issue to note is that the computation of <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> and <code class="docutils literal notranslate"><span class="pre">ssr_volume_simple</span></code> are completely separate, and
both of them live within the activity effect model. In reality, these quantities are very much related and should be
tied together in some way. The relationship between rate and volume is activity independent, and thus it makes more
sense to define that relationship in our <code class="docutils literal notranslate"><span class="pre">DataModel</span></code> class instead of the activity itself.</p>
<p>Given these issues, we will hold off on implementing this approach for <code class="docutils literal notranslate"><span class="pre">change_mag_mode</span></code> and move forward to trying out
our next approach.</p>
</section>
<section id="method-2-sample-based-volume-update">
<h2>Method 2 - Sample-based volume update<a class="headerlink" href="#method-2-sample-based-volume-update" title="Link to this heading">¶</a></h2>
<p>Another method to integration we can take is a numerical approach where we compute data volume by sampling the value of
the <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> at a fixed interval across the entire plan. In order to implement this method, we can <code class="docutils literal notranslate"><span class="pre">spawn()</span></code> a
simple task from our top-level <code class="docutils literal notranslate"><span class="pre">Mission</span></code> class that runs in the background while the plan is being simulated, which is
completely independent of activities in the plan. Such tasks are known as <code class="docutils literal notranslate"><span class="pre">daemon</span></code> tasks, and your mission model can
have an arbitrary number of them.</p>
<p>Before we create this task, let’s add another discrete <code class="docutils literal notranslate"><span class="pre">cell</span></code> of type <code class="docutils literal notranslate"><span class="pre">double</span></code> called <code class="docutils literal notranslate"><span class="pre">ssr_volume_sampled</span></code> to
the <code class="docutils literal notranslate"><span class="pre">DataModel</span></code> class. Just as with other resources we have made, the declaration will look like</p>
<p>and the definition, initialization, and registration in the constructor will be</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">ssr_volume_sampled</span> <span class="o">=</span> <span class="n">registrar</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">registrar</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s2">&quot;ssr_volume_sampled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssr_volume_sampled</span><span class="o">.</span><span class="n">get</span><span class="p">)</span>
</pre></div>
</div>
<p>In addition to the resource, let’s add another member variable to specify the sampling interval we’d like for our
integration. Choosing <code class="docutils literal notranslate"><span class="pre">60</span></code> seconds will result in the follow variable definition</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">INTEGRATION_SAMPLE_INTERVAL</span> <span class="o">=</span> <span class="n">Duration</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">Duration</span><span class="o">.</span><span class="n">SECONDS</span><span class="p">)</span>
</pre></div>
</div>
<p>Staying in the <code class="docutils literal notranslate"><span class="pre">DataModel</span></code> class, we can can create a member function called <code class="docutils literal notranslate"><span class="pre">integrate_sampled_ssr</span></code> that has no
parameters, which we will spawn from the <code class="docutils literal notranslate"><span class="pre">Mission</span></code> class shortly. For the sake of simplicity, we will define this
function to take the “right” Reimann Sum (a “rectangle” rule approximation) of the <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> over time. The
implementation of this function looks like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@Task</span>
<span class="k">def</span> <span class="nf">integrate_sampled_ssr</span><span class="p">(</span><span class="n">data_model</span><span class="p">:</span> <span class="n">DataModel</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">delay</span><span class="p">(</span><span class="n">INTEGRATION_SAMPLE_INTERVAL</span><span class="p">)</span>
        <span class="n">current_recording_rate</span> <span class="o">=</span> <span class="n">data_model</span><span class="o">.</span><span class="n">recording_rate</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">data_model</span><span class="o">.</span><span class="n">ssr_volume_sampled</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="n">current_recording_rate</span>
                <span class="o">*</span> <span class="n">INTEGRATION_SAMPLE_INTERVAL</span><span class="o">.</span><span class="n">to_number_in</span><span class="p">(</span><span class="n">Duration</span><span class="o">.</span><span class="n">SECONDS</span><span class="p">)</span>
                <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>  <span class="c1"># Mbit -&gt; Gbit</span>
</pre></div>
</div>
<p>As a programmer, you may be surprised to see an infinite <code class="docutils literal notranslate"><span class="pre">while</span></code> loop, but Aerie will shut down this task, effectively
breaking the loop, once the simulation reaches the end of the plan. Within the loop, the first thing we do is <code class="docutils literal notranslate"><span class="pre">delay()</span></code>
by our sampling interval and then retrieve the current value of <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code>. Finally, we sum up our rectangle by
multiplying the current rate by the sampling interval. We could have easily chosen to use other numerical methods like
the “trapezoid” rule by storing the previous recording rate in addition to the current rate, but what we did is
sufficient for now.</p>
<p>The final piece we need to build into our model to get this method to work is a simple <code class="docutils literal notranslate"><span class="pre">spawn</span></code> with the <code class="docutils literal notranslate"><span class="pre">Mission</span></code> class
to our <code class="docutils literal notranslate"><span class="pre">integrate_sampled_ssr</span></code> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spawn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_model</span><span class="p">::</span><span class="n">integrate_sampled_ssr</span><span class="p">)</span>
</pre></div>
</div>
<p>The issues with this approach to integration are probably fairly apparent to you. First of all, this approach is truly
an approximation, so the resulting volume may not be the actual volume if the sampled points don’t align perfectly with
the changes in <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code>. Secondly, the fact we are sampling at a fixed time interval means we could be computing
many more time points than we actually need if the recording rate isn’t changing between time points. If you were to try
to scale up this approach, you might run into performance issues with your model where simulation takes much longer than
it needs to.</p>
<p>Despite these issues <code class="docutils literal notranslate"><span class="pre">daemon</span></code> tasks are a very effective tool in a modelers tool belt for describing “background”
behavior of your system. Examples for a spacecraft model could include the computation of geometry, battery degradation
over time, environmental effects, etc.</p>
</section>
<section id="method-3-update-volume-upon-change-to-rate">
<h2>Method 3 - Update volume upon change to rate<a class="headerlink" href="#method-3-update-volume-upon-change-to-rate" title="Link to this heading">¶</a></h2>
<p>If you are looking for an efficient, yet accurate way to compute data volume from <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code>, one method you could
take is to set up trigger that calls a function whenever <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> changes and then computes volume by
multiplying
the rate just before the latest change by the duration that has passed since the last change. Fortunately, there is a
fairly easy way to do this in Aerie’s modeling framework.</p>
<p>Let’s begin by creating one more <code class="docutils literal notranslate"><span class="pre">cell</span></code> called <code class="docutils literal notranslate"><span class="pre">ssr_volume_upon_rate_change</span></code> in our <code class="docutils literal notranslate"><span class="pre">DataModel</span></code> class (refer back to
previous instances in this tutorial for how to declare and define one of these). In addition to our volume resource, we
are also going to need a <code class="docutils literal notranslate"><span class="pre">Clock</span></code> resource to help us track the time between changes to <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code>. Since this
resource is more of a “helper” resource and doesn’t need to be exposed to our planners, we’ll make it <code class="docutils literal notranslate"><span class="pre">private</span></code> and not
register it to the UI. Declaring and defining a <code class="docutils literal notranslate"><span class="pre">Clock</span></code> resource is not much different than declaring a <code class="docutils literal notranslate"><span class="pre">Discrete</span></code>
except you don’t have to specify a primitive type.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">time_since_last_rate_change</span> <span class="o">=</span> <span class="n">registrar</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span><span class="n">Duration</span><span class="o">.</span><span class="n">ZERO</span><span class="p">,</span> <span class="n">behavior</span><span class="o">=</span><span class="n">Clock</span><span class="o">.</span><span class="n">behavior</span><span class="p">)</span>
</pre></div>
</div>
<p>This will start a “stopwatch” right at the start of the plan so we can track the time between the start of the plan and
the first time <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> is changed. We’ll also need one more member variable of type <code class="docutils literal notranslate"><span class="pre">Double</span></code>, which we’ll
call <code class="docutils literal notranslate"><span class="pre">previous_rate</span></code> to keep track of the previous value of <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> for us.</p>
<p>Our next step is to build our trigger to react when there is a change to <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code>. We can do this by leveraging
the <code class="docutils literal notranslate"><span class="pre">wheneverUpdates()</span></code> static method available within the framework’s <code class="docutils literal notranslate"><span class="pre">Reactions</span></code> class</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spawn</span><span class="p">(</span><span class="n">monitor_recording_rate_updates</span><span class="p">(</span><span class="n">data_model</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Reactions</span></code> class has a couple more static methods that a modeler may find useful. The <code class="docutils literal notranslate"><span class="pre">every()</span></code> method allows you
to specify a duration to call a recurring action (we could have used this instead of our <code class="docutils literal notranslate"><span class="pre">spawn()</span></code> for the sampled
integration method). The <code class="docutils literal notranslate"><span class="pre">whenever()</span></code> method allows you to specify a <code class="docutils literal notranslate"><span class="pre">Condition</span></code>, which when met, would trigger an
action of your choosing. An example of a condition could be when a resource reaches a certain threshold.</p>
</div>
<p>As you can see, this method takes a resource as its first argument and some <code class="docutils literal notranslate"><span class="pre">Runnable</span></code>, like a function call, as it’s
second argument. We have specified that the function <code class="docutils literal notranslate"><span class="pre">upon_recording_rate_update</span></code> be called, so now we have to implement
that function within our <code class="docutils literal notranslate"><span class="pre">DataModel</span></code> class. The implementation of that function is below, which we will walk through
line by line.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@Task</span>
<span class="k">def</span> <span class="nf">monitor_recording_rate_updates</span><span class="p">(</span><span class="n">data_model</span><span class="p">):</span>
    <span class="n">previous_recording_rate</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">new_value</span> <span class="ow">in</span> <span class="n">monitor_updates</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">data_model</span><span class="o">.</span><span class="n">recording_rate</span><span class="o">.</span><span class="n">get</span><span class="p">()):</span>
        <span class="c1"># Determine time elapsed since last update</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time_since_last_rate_change</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="c1"># Update volume only if time has actually elapsed</span>
        <span class="k">if</span> <span class="err">!</span><span class="n">t</span><span class="o">.</span><span class="n">isZero</span><span class="p">():</span>
            <span class="n">ssr_volume_upon_rate_change</span> <span class="o">+=</span> <span class="n">previous_recording_rate</span> <span class="o">*</span> <span class="n">t</span><span class="o">.</span><span class="n">to_number_in</span><span class="p">(</span><span class="n">Duration</span><span class="o">.</span><span class="n">SECONDS</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>  <span class="c1"># Mbit -&gt; Gbit</span>
        
            <span class="n">previous_recording_rate</span> <span class="o">=</span> <span class="n">new_value</span>
            <span class="c1"># Restart clock (set back to zero)</span>
            <span class="n">ClockEffects</span><span class="o">.</span><span class="n">restart</span><span class="p">(</span><span class="n">time_since_last_rate_change</span><span class="p">)</span>
</pre></div>
</div>
<p>When the <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> resource changes, the first thing we do is determine how much time has passed since it last
changed (or since the beginning of the plan). If no time has passed, we don’t want to re-integrate and double count
volume, but if time has passed, we do our simple integration by multiplying the previous rate by the elapsed time since
the value of rate changed. We then store the new value of rate as the previous rate and restart our stopwatch to we get
the right time next time the rate changes.</p>
<p>And that’s it! Now, every time <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> changes, the SSR volume will update to the correct volume. However, the
volume is still a discrete resource, so volume will only change as a step function at time points where the rate
changes. Nonetheless, since <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code> is piece-wise constant, you’ll get the right answer for volume with no
error
at those time points.</p>
</section>
<section id="method-4-derived-volume-from-polynomial-resource">
<h2>Method 4 - Derived volume from polynomial resource<a class="headerlink" href="#method-4-derived-volume-from-polynomial-resource" title="Link to this heading">¶</a></h2>
<p>We have finally arrived at the final method we’ll go through for integrating <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code>, and in some ways, this
one
is the most straightforward. We will define our data volume as polynomial resource, <code class="docutils literal notranslate"><span class="pre">ssr_volume_polynomial</span></code>, which we
can build by using an <code class="docutils literal notranslate"><span class="pre">integrate()</span></code> static method provided by the <code class="docutils literal notranslate"><span class="pre">PolynomialResources</span></code> class. As a polynomial resource,
we will actually see the volume increase linearly over time as opposed to in discrete chunks.
Since <code class="docutils literal notranslate"><span class="pre">ssr_volume_polynomial</span></code> will be derived directly from <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code>, we can make this a <code class="docutils literal notranslate"><span class="pre">Resource</span></code> as opposed
to
a <code class="docutils literal notranslate"><span class="pre">cell</span></code>. The declaration of our new resource looks like this</p>
<p>while the definition and registration in the constructor of our <code class="docutils literal notranslate"><span class="pre">DataModel</span></code> class look like this</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">self</span><span class="p">.</span><span class="na">ssr_volume_polynomial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scale</span><span class="p">(</span>
<span class="w">    </span><span class="n">PolynomialResources</span><span class="p">.</span><span class="na">integrate</span><span class="p">(</span><span class="n">as_polynomial</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">recording_rate</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="mf">1e-3</span><span class="p">)</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">Gbit</span>
<span class="n">registrar</span><span class="p">.</span><span class="na">resource</span><span class="p">(</span><span class="s">&quot;ssr_volume_polynomial&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ssr_volume_polynomial</span><span class="p">.</span><span class="na">approx_linear</span><span class="p">)</span>
</pre></div>
</div>
<p>Breaking down the definition, we see the <code class="docutils literal notranslate"><span class="pre">integrate()</span></code> function takes the resource to integrate as the first argument,
but that argument requires the resource to be polynomial as well. Fortunately, there is a function
in the <code class="docutils literal notranslate"><span class="pre">PolynomialResources</span></code> module called <code class="docutils literal notranslate"><span class="pre">as_polynomial()</span></code> that can convert discrete resources like <code class="docutils literal notranslate"><span class="pre">recording_rate</span></code>
to
polynomial ones. The second argument is the initial value for the resource, which we have been assuming is <code class="docutils literal notranslate"><span class="pre">0.0</span></code> for
data volume. The <code class="docutils literal notranslate"><span class="pre">integrate()</span></code> function is then wrapped by <code class="docutils literal notranslate"><span class="pre">scale()</span></code>, another handy static method
in <code class="docutils literal notranslate"><span class="pre">PolynomialResources</span></code> to convert our resource from <code class="docutils literal notranslate"><span class="pre">Megabit</span></code> to <code class="docutils literal notranslate"><span class="pre">Gigabit</span></code>.</p>
<p>The resource registration is also slightly different than what we have seen thus far as we are using a <code class="docutils literal notranslate"><span class="pre">real()</span></code> method
as opposed to <code class="docutils literal notranslate"><span class="pre">discrete()</span></code> and we have to wrap our resource with yet another static helper method
in <code class="docutils literal notranslate"><span class="pre">PolynomialResources</span></code> called <code class="docutils literal notranslate"><span class="pre">assumeLinear()</span></code>. The reason we have to do this is that the UI currently does not have
support for <code class="docutils literal notranslate"><span class="pre">Polynomial</span></code> resources and can only render timelines as linear or constant segments. In our
case, <code class="docutils literal notranslate"><span class="pre">ssr_volume_polynomial</span></code> is actually linear anyway, so we are not “degrading” our resource by having to make this
down conversion.</p>
<p>Now in reality, our on-board <code class="docutils literal notranslate"><span class="pre">SSR</span></code> is going to have a max capacity, and if data is removed from the <code class="docutils literal notranslate"><span class="pre">SSR</span></code>, we want to
make sure our model stops decreasing the <code class="docutils literal notranslate"><span class="pre">SSR</span></code> volume once it reaches <code class="docutils literal notranslate"><span class="pre">0.0</span></code>. By good fortune, the Aerie framework
includes another static method in <code class="docutils literal notranslate"><span class="pre">PolynomialResources</span></code> called <code class="docutils literal notranslate"><span class="pre">clampedIntegral()</span></code> that allows you to build a resource
that takes care of all that messy logic to make sure you are adhering to your min/max limits.</p>
<p>If we wanted to build a “clamped” version of <code class="docutils literal notranslate"><span class="pre">ssr_volume_polynomial</span></code>, it would look something like this</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">clamped_integrate</span> <span class="o">=</span> <span class="n">PolynomialResources</span><span class="o">.</span><span class="n">clamped_integrate</span><span class="p">(</span><span class="n">scale</span><span class="p">(</span>
    <span class="n">as_polynomial</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">recording_rate</span><span class="p">),</span> <span class="mf">1e-3</span><span class="p">),</span>
    <span class="n">PolynomialResources</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span>
    <span class="n">PolynomialResources</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">250.0</span><span class="p">),</span>
    <span class="mf">0.0</span><span class="p">)</span>
<span class="n">ssr_volume_polynomial</span> <span class="o">=</span> <span class="n">clamped_integrate</span><span class="o">.</span><span class="n">integral</span><span class="p">()</span>
</pre></div>
</div>
<p>The second and third arguments of <code class="docutils literal notranslate"><span class="pre">clamped_integrate()</span></code> are the min and max bounds for the integral and the final
argument is the starting value for the resource as it was in <code class="docutils literal notranslate"><span class="pre">integrate()</span></code>. The <code class="docutils literal notranslate"><span class="pre">clamped_integrate()</span></code> method actually
returns a <code class="docutils literal notranslate"><span class="pre">record</span></code> of three resources:</p>
<ul class="simple">
<li><p>integral – The clamped integral value (i.e. the main resource of interest)</p></li>
<li><p>overflow – The rate of overflow when the integral hits its upper bound. You can integrate this to get cumulative
overflow.</p></li>
<li><p>underflow – The rate of underflow when the integral hits its lower bound. You can integrate this to get cumulative
underflow.</p></li>
</ul>
<p>As expected, the <code class="docutils literal notranslate"><span class="pre">integral()</span></code> resource is mapped to <code class="docutils literal notranslate"><span class="pre">ssr_volume_polynomial</span></code> to complete its definition.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="7-integration-comparision.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Integral Method Comparison</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="5-second-look.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Second Look</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, California Institute of Technology
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Integrating Data Rate</a><ul>
<li><a class="reference internal" href="#method-1-increase-volume-within-activity">Method 1 - Increase volume within activity</a></li>
<li><a class="reference internal" href="#method-2-sample-based-volume-update">Method 2 - Sample-based volume update</a></li>
<li><a class="reference internal" href="#method-3-update-volume-upon-change-to-rate">Method 3 - Update volume upon change to rate</a></li>
<li><a class="reference internal" href="#method-4-derived-volume-from-polynomial-resource">Method 4 - Derived volume from polynomial resource</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=f7cdbf68"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=4e2eecee"></script>
    </body>
</html>